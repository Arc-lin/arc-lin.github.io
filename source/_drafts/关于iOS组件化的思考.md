title: 关于iOS组件化的思考
author: Arclin
abbrlink: 51f93d53
date: 2018-05-11 15:02:35
tags:
---
最近公司要对以往App进行组件化处理，本人有幸收到任务，故运用了以往学到的架构思想对进行规划。
<!--more-->

### 需求分析

1. 公司的业务线非常地多，基本上每个业务都会有一个专门的APP去推广，然后公司还有些平台版APP，用于集合多条业务线，所以说每个业务都需要进行封装，去重复利用，这是需求一。
2. 每个业务模块是需要有一定的定制性的，毕竟如果几个APP都用到了通过模块，然后UI长得都一样，那这样子就很可能过不了审核，苹果会认为你只是套个马甲发多个几APP，所以说组件设计的时候要分离UI和数据层，中间不要形成依赖，这是需求二。
3. 组件间不能直接通信，要通过中间层去请求，要做到组件A删除后组件B能照样编译成功，除非说他们之间的耦合成为了产品需求，否则他们不应该直接通信，这是需求三。
4. 组件需要做好log处理，还要添加埋点，在哪里做切点，这是很重要的需要仔细考虑的事情，是组件内置埋点还是给暴露给主工程去注册埋点，优缺利弊是需要权衡的，这是需求四。

### 已有的组件化

	之前公司已经有cocoapods的组件化方案了，cocoapods是很好的组件化实践，一个pod install就可以引入组件